/* =============================================================================	PROJECT:	KSetFieldByNameCallback		FILE:		KSetFieldByNameCallback.cpp		PURPOSE:	Callback to get the contents of a text field.			COPYRIGHT:	(C) Copyright 2001 by M. Uli Kusterer, all rights reserved.					REACH ME AT:				E-MAIL:		witness@weblayout.com				URL:		http://www.weblayout.com/witness			REVISIONS:		2001-07-13	UK		Created.				   ========================================================================== */#pragma mark [Headers]/* --------------------------------------------------------------------------------	Headers:   ----------------------------------------------------------------------------- */#include	"KSetFieldByNameCallback.h"#pragma mark [Globals]/* --------------------------------------------------------------------------------	Globals/Static Variables:   ----------------------------------------------------------------------------- */// Put these li'l critters here.#pragma mark -#pragma mark [Init/Kill]/* --------------------------------------------------------------------------------	¥ CONSTRUCTOR:		Do some initialization.		TAKES:		-			GIVES:		-		REVISIONS:		2001-07-13	UK		Created.   ----------------------------------------------------------------------------- */KSetFieldByNameCallback::KSetFieldByNameCallback(): KExternalCallback(){	requestCode = xreqSetFieldByName;}/* --------------------------------------------------------------------------------	¥ DESTRUCTOR:		Do some cleanup.		REVISIONS:		2001-07-13	UK		Created.   ----------------------------------------------------------------------------- */KSetFieldByNameCallback::~KSetFieldByNameCallback(){	// Do your stuff here!}#pragma mark [Class Methods]/* --------------------------------------------------------------------------------	Run:		Actually do what this callback does. Pass values in and out in inArgs and		outArgs of the XCmdBlock, return an XCMD result in the param block.		TAKES:		-		GIVES:		-		REVISIONS:		2001-07-13	UK		Created.   ----------------------------------------------------------------------------- */void	KSetFieldByNameCallback::Run( XCmdBlockPtr theBlock ){	bool		cardFld;	Handle		fieldName = NewHandle(0);		// Param 1: TRUE for cd fld, FALSE for bg fld:	cardFld = theBlock->inArgs[0];		// Param 2: field name:	SetHandleSize( fieldName, ((unsigned char*)theBlock->inArgs[1])[0] );	std::memmove( *fieldName, ((unsigned char*)theBlock->inArgs[1]), ((unsigned char*)theBlock->inArgs[1])[0] );		// Do it!	SetFieldByName( fieldName, cardFld, (Handle) theBlock->inArgs[2] );		DisposeHandle( fieldName );	theBlock->result = xresSucc;}